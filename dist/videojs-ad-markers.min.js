/*! @name @videojs-ad-markers/videojs-ad-markers @version 2.0.0 @license MIT */
!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],r):(e=e||self).videojsAdMarkers=r(e.videojs)}(this,function(e){"use strict";var r=function(r){var t,i;function s(e){var t;return(t=r.call(this,e)||this).options={},t.markersMap={},t.markersList=[],t.isInitialized=!1,t.player.ready(function(){t.player.addClass("vjs-ad-markers")}),t}i=r,(t=s).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var a=s.prototype;return a.setMarkers=function(r){this.options=e.mergeOptions(this.options,r),this.markersMap={},this.markersList=[],this.isInitialized=!1,this.initialize()},a.generateUUID=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){var t=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===r?t:3&t|8).toString(16)})},a.stylizeMarker=function(e,r){e.style.left=r+"%"},a.getMarkerTime=function(e){return e.time},a.sortMarkersList=function(){var e=this;this.markersList.sort(function(r,t){return e.getMarkerTime(r)-e.getMarkerTime(t)})},a.addMarkers=function(e){var r=this;e&&0!==e.length&&(e.forEach(function(e,t){e.key=r.generateUUID(),r.player.$(".vjs-progress-control").appendChild(r.createMarkerDiv(e)),r.markersMap[e.key]=e,r.markersList.push(e)}),this.sortMarkersList())},a.getPosition=function(e){return this.getMarkerTime(e)/this.player.duration()*100},a.createMarkerDiv=function(e){var r=document.createElement("div");return r.className+="vjs-admarker",!1!==e.loader&&(r.className+=" vjs-admarker-announcer"),this.stylizeMarker(r,this.getPosition(e)),r.dataset.markerKey=e.key,r.dataset.markerTime=this.getMarkerTime(e),r},a.removeAll=function(){for(var e=[],r=0;r<this.markersList.length;r++)e.push(r);this.removeMarkers(e),this.isInitialized=!1},a.removeMarkers=function(e){for(var r=0;r<e.length;r++){var t=e[r],i=this.markersList[t];i&&(delete this.markersMap[i.key],this.markersList[t]=null,this.player.$(".vjs-admarker[data-marker-key='"+i.key+"']").remove())}for(var s=this.markersList.length-1;s>=0;s--)null===this.markersList[s]&&this.markersList.splice(s,1);this.sortMarkersList()},a.initialize=function(){!1===this.isInitialized&&(this.isInitialized=!0,this.addMarkers(this.options.markers))},s}((e=e&&e.hasOwnProperty("default")?e.default:e).getPlugin("plugin"));return r.defaultState={},r.VERSION="2.0.0",e.registerPlugin("adMarkers",r),r});
