/*! @name @videojs-ad-markers/videojs-ad-markers @version 2.0.0 @license MIT */
!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],r):(e=e||self).videojsAdMarkers=r(e.videojs)}(this,function(e){"use strict";var r=(e=e&&e.hasOwnProperty("default")?e.default:e).getPlugin("plugin"),t={},i=function(r){var i,a;function s(i,a){var s;return(s=r.call(this,i)||this).options=e.mergeOptions(t,a),s.markersMap={},s.markersList=[],s.isInitialized=!1,s.player.ready(function(){s.player.addClass("vjs-ad-markers")}),s.player.on("adsready",function(){s.initialize()}),s}a=r,(i=s).prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a;var n=s.prototype;return n.generateUUID=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){var t=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===r?t:3&t|8).toString(16)})},n.stylizeMarker=function(e,r){e.style.left=r+"%"},n.getMarkerTime=function(e){return e.time},n.sortMarkersList=function(){var e=this;this.markersList.sort(function(r,t){return e.getMarkerTime(r)-e.getMarkerTime(t)})},n.addMarkers=function(e){var r=this;e.forEach(function(e,t){e.key=r.generateUUID(),r.player.$(".vjs-progress-control").appendChild(r.createMarkerDiv(e)),r.markersMap[e.key]=e,r.markersList.push(e)}),this.sortMarkersList()},n.getPosition=function(e){return this.getMarkerTime(e)/this.player.duration()*100},n.createMarkerDiv=function(e){var r=document.createElement("div");return r.className+="vjs-admarker",!1!==e.loader&&(r.className+=" vjs-admarker-announcer"),this.stylizeMarker(r,this.getPosition(e)),r.dataset.markerKey=e.key,r.dataset.markerTime=this.getMarkerTime(e),r},n.removeAll=function(){for(var e=[],r=0;r<this.markersList.length;r++)e.push(r);this.removeMarkers(e)},n.removeMarkers=function(e){for(var r=0;r<e.length;r++){var t=e[r],i=this.markersList[t];i&&(delete this.markersMap[i.key],this.markersList[t]=null,this.player.$(".vjs-admarker[data-marker-key='"+i.key+"']").remove())}for(var a=this.markersList.length-1;a>=0;a--)null===this.markersList[a]&&this.markersList.splice(a,1);this.sortMarkersList()},n.initialize=function(){!1===this.isInitialized&&(this.isInitialized=!0,this.removeAll(),this.addMarkers(this.options.markers))},s}(r);return i.defaultState={},i.VERSION="2.0.0",e.registerPlugin("adMarkers",i),i});
